### <a name="_b7urdng99y53"></a>**Название задачи:** 
### <a name="_hjk0fkfyohdk"></a>**Автор:**
### <a name="_uanumrh8zrui"></a>**Дата:**
### <a name="_3bfxc9a45514"></a>**Функциональные требования**
Опишите здесь верхнеуровневые Use Cases. Их нужно оформить в виде таблицы с пошаговым описанием:

|**№**|**Действующие лица или системы**|**Use Case**|**Описание**|
| :-: | :- | :- | :- |
|||||

|**№**| **Действующие лица или системы** |               **Use Case**              |                                               **Описание**                                                |
|:---:|:---------------------------------|:----------------------------------------|:----------------------------------------------------------------------------------------------------------|
|  1  | Клиент (клиентская база)         | 	Просмотр депозитов (интернет-банк)     | 	Клиент авторизуется в интернет-банке и видит список депозитов, включая персональные ставки.            |
|     |                                  | 	                                       | 	                                                                                                       |
|  2  | Клиент (клиентская база)         | 	Подача заявки на депозит               | 	Клиент выбирает депозит, указывает сумму и счет списания, подтверждает                                 |
|     |                                  | 	                                       | 	операцию SMS-кодом.                                                                                    |
|     |                                  | 	                                       | 	                                                                                                       |
|  3  | Клиент (новый)                   | 	Просмотр списка депозитов              | 	Клиент заходит на сайт банка и видит список доступных депозитов                                        |
|     |                                  | 	                                       | 	с актуальными ставками.                                                                                |
|     |                                  | 	                                       | 	                                                                                                       |
|  4  | Клиент (новый)                   | 	Подача заявки на депозит               | 	Клиент заполняет форму (ФИО, номер телефона) и отправляет заявку на депозит.                           |
|     |                                  | 	                                       | 	Система шифрует данные и передает их в кол-центр.                                                      |
|     |                                  | 	                                       | 	                                                                                                       |
|  5  | Клиент (новый)                   | 	Прохождение идентификации              | 	Клиент посещает отделение банка для подтверждения личности                                             |
|     |                                  | 	                                       | 	и подписания документов.                                                                               |
|     |                                  | 	                                       | 	                                                                                                       |
|  6  | Менеджер кол-центра              | 	Обработка заявки нового клиента        | 	Менеджер получает заявку, проверяет данные, связывается с клиентом,                                    |
|     |                                  | 	                                       | 	уточняет детали и в частных случаях, может предлажить особые условия.                                  |
|     |                                  | 	                                       | 	                                                                                                       |
|  7  | Бэк-офис (депозиты)              | 	Подтверждение условий депозита         | 	Бэк-офис проверяет условия в заявке, согласовывает условия                                             |
|     |                                  | 	                                       | 	и подтверждает открытие депозита в АБС по условиям.                                                    |
|     |                                  | 	                                       | 	                                                                                                       |
|  8  | Бэк-офис (депозиты)              | 	Обработка заявки существующего клиента | 	Бэк-офис проверяет заявку, согласовывает условия обрабатываемой заявки                                 |
|     |                                  | 	                                       | 	и подтверждает открытие депозита в АБС по заявке.                                                      |
|     |                                  | 	                                       | 	                                                                                                       |
|  9  | Администратор бэк-офиса          | 	Управление ставками по депозитам       | 	Администратор загружает/обновляет ставки из Excel(XLS) в АБС,                                          |
|     |                                  | 	                                       | 	настраивает условия для разных клиентов.                                                               |
|     |                                  | 	                                       | 	                                                                                                       |
|  10 | АБС                              | 	Обновление данных депозита             | 	АБС фиксирует новый депозит, списывает средства со счета клиента                                       |
|     |                                  | 	                                       | 	и начисляет проценты.                                                                                  |
|     |                                  | 	                                       | 	                                                                                                       |
|  11 | АБС                              | 	Открытие депозита                      | 	АБС регистрирует новый депозит, назначает ставку                                                       |
|     |                                  | 	                                       | 	и генерирует договор по депозиту.                                                                      |
|     |                                  | 	                                       | 	                                                                                                       |
|  12 | SMS-сервис                       | 	Отправка уведомления клиенту           | 	Клиент получает SMS о подтверждении ставки                                                             |
|     |                                  | 	о подтверждении ставки                 | 	и открытии депозита.                                                                                   |
|     |                                  | 	                                       | 	                                                                                                       |
|  13 | SMS-сервис                       | 	Отправка уведомления клиенту           | 	Клиент получает SMS об успешном открытии депозита.                                                     |
|     |                                  | 	об открытии депозита                   | 	                                                                                                       |
|     |                                  | 	                                       | 	                                                                                                       |
|  14 | Система мониторинга              | 	Обеспечение отказоустойчивости         | 	Система отслеживает доступность сервисов, автоматически переключает                                    |
|     |                                  | 	                                       | 	трафик на резервный ЦОД при сбоях в системе.                                                           |
|     |                                  | 	                                       | 	                                                                                                       |



### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**
Опишите здесь нефункциональные требования и архитектурно значимые требования.

|**№**|**Требование**|
| :-: | :- |
|||

| **№** | **Требование**                                                                                                                                                                   |
|:-----:|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   1   | Время отклика системы ≤ 1 сек. для пользовательских операций (просмотр депозитов, подача заявки).                                                                                | 
|   2   | Загрузка системных данных ≤ 2 сек.                                                                                                                                               | 
|   3   | Система должна обеспечивать высокую надежность - время простоя ~0.01%.                                                                                                           |
|   4   | Доступность интернет-банка и АБС - 24/7.                                                                                                                                         |
|   5   | Интернет-банк должен поддерживать добавление серверов под нагрузку (горизонтальное масштабирование).                                                                             |
|   6   | Масштабирование АБС только вертикальное.                                                                                                                                         |
|   7   | При сбое в основном ЦОД система должна автоматически переключаться на резервный ЦОД с максимальным временем восстановления (RTO) ≤ 15 минут.                                     |
|   8   | Все передаваемые данные (ФИО, номер телефона, реквизиты) должны шифроваться с использованием TLS. Персональные данные в БД должны шифроваться AES-256                            |
|   9   | Новые компоненты должны работать с PostgreSQL. Внедрение Kafka обеспечит совместимость после обновления интернет-банка и упростит разделение сервисов.                           |
|  10   | Все критические операции (открытие депозита, изменение ставок) журналируются с возможностью аудита. Срок хранения журналов — не менее 1 года.                                    |
|  11   | Взаимодействие с АБС должно происходить через асинхронные очереди Kafka, чтобы избежать перегрузки. Прямые API-вызовы возможны, но не рекомендованы.                             |
|  12   | Время доставки SMS после подтверждения депозита ≤ 30 сек.                                                                                                                        |
|  13   | Время простоя SMS-шлюза ~0.05%.                                                                                                                                                  |
|  14   | Администраторы бэк-офиса должны иметь возможность загружать/обновлять ставки из Excel(XLS) до полного перехода на АБС.                                                           |
|  15   | Система должена поддерживать конфликты версий и откат изменений.                                                                                                                 |
|  16   | В рамках MVP — допускается монолит, но с возможностью постепенного выделения сервисов (депозиты, SMS, ставки). API должно быть RESTful + OpenAPI.                                |
|  17   | Справочники (списки депозитов, ставки) должны кешироваться на 5 минут для снижения нагрузки на АБС.                                                                              |
|  18   | Использовать C# (.Net 8) для backend, React/JQuery для frontend. БД: Postgres.                                                                                                   |
|  19   | Система должна выдерживать ≥ 1000 RPS (запросов в секунду). Тестирование — JMeter/Gatling.                                                                                       |
|  20   | Все API, архитектурные решения и процессы должны быть документированы для использования в Swagger. Документация обновляется в соответствие с выпуском обновлений.                |


### <a name="_qmphm5d6rvi3"></a>**Решение**
Приведите диаграммы контекста и контейнеров в модели C4. Опишите там основные компоненты и интеграции всех элементов решения. 

[C4_Diagram_Context.puml](C4_Diagram_Context.puml)

[C4_Diagram_Container.puml](C4_Diagram_Container.puml)

Также опишите, какой логикой вы руководствовались в ходе принятия решений и выбора технологий. Не забывайте, что необходимо учесть все функциональные и нефункциональные требования.
Язык C# выбран, как эффективный с поддержкой высокой нагрузки, достаточно легко масштабируемый с кроссплатформенными возможностями. Kafka легко интегрируется и имеет высокие показатели отказоустойчивости и масштабируемости. Безопастность хранения и доступа это важный элемент системы, AES-256 и TLS, например 1.2 обеспечивает хорошую степень шифрования. Postgres, как реляционная база эффективна и обладает высокими характеристиками, кроме того, хорошо бекапируется. ReactJS, Ios, Android является популярными системами для пользователей.

### <a name="_bjrr7veeh80c"></a>**Альтернативы**
Опишите здесь наиболее важные альтернативные решения.

Вариантом решения может быть и Nodejs, который мог бы дать большую выгоду по ЗП разработчиков, но это могло бы ухудшить стабильность системы. Возможно некоторые сервисы эффективней переписать на других ЯП, например, Python.

**Недостатки, ограничения, риски**

Подробно опишите здесь недостатки, ограничения и риски выбранного решения.

Технические ограничения

| **Категория**         | **Проблема**                                                                       | **Риск**                                                                                       |
|:----------------------|:-----------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------|
| АБС (Legacy-система)  | Вертикальное масштабирование, высокая нагрузка, устаревший стек (Delphi + PL/SQL). | Риск перегрузки при росте числа заявок. Сложности интеграции с современными решениями (Kafka). |
| Кол-центр (подрядчик) | Ограниченная кастомизация, зависимость от внешней команды.                         | Задержки при доработках. Риск несоответствия Service Level Agreement(SLA).                     |
| Аудит операций        | Недостаточное логирование действий менеджеров.                                     | Проблемы в выявлении ошибок.                                                                   |
| SMS-шлюз              | Зависимость от внешних вендеров.                                                   | Финансовые потери в случае сбоя у SMS провайдера.                                              |
| Kafka                 | В команде АБС нет специалистов по Kafka/современным очередям.                      | Сложность интеграции                                                                           |
| It-ланшафт            | Недостатки в цене разработчиков                                                    | Ограничения бюджета                                                                            |
| It-ланшафт            | Проблемы с импортозамещением                                                       | Ограничения по используемым технологиям                                                        |
| DotNet                | Необходимость обфускации и минификации, по приxине JIT компилирования              | Ограничения по используемым технологиям                                                        |
| KeyCloak              | Возможно потребуется замена KeyCloak на самописный Сервер авторизации              | Ограничения по используемым технологиям                                                        |
